<mxfile host="65bd71144e">
    <diagram id="WI9T0HZ2pTsCkuznbFz-" name="Page-1">
        <mxGraphModel dx="2463" dy="1015" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="" style="rounded=1;whiteSpace=wrap;html=1;fontColor=#F0F0F0;shadow=0;glass=0;arcSize=8;" vertex="1" parent="1">
                    <mxGeometry x="18" y="20" width="782" height="1130" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=22;labelBackgroundColor=none;fillColor=#18141D;glass=0;fillStyle=solid;arcSize=5;" parent="1" vertex="1">
                    <mxGeometry x="140" y="650" width="540" height="460" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-20" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="164" y="667.5" width="498.5" height="36.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-11" value="&lt;span&gt;Client web browser queries DNS for the custom domain name of the API Management Service API.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;fontColor=#F0F0F0;" parent="55kkj2fP2kc5KDoWpac7-20" vertex="1">
                    <mxGeometry x="49.5" width="449" height="36.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-22" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-20" vertex="1">
                    <mxGeometry width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-21" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="164" y="722" width="499.5" height="43.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-12" value="&lt;span&gt;Azure Public DNS returns the value of the CNAME record which points the client to the hostname of the API Management Service API.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-21" vertex="1">
                    <mxGeometry x="49.5" width="450" height="43.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-23" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-21" vertex="1">
                    <mxGeometry width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-22" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="164" y="779" width="499.5" height="45.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-13" value="&lt;span&gt;Client makes a POST HTTP request to the API Management Service API.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-22" vertex="1">
                    <mxGeometry x="49.5" width="450" height="45.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-24" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-22" vertex="1">
                    <mxGeometry width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-23" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="164" y="839" width="499.5" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-14" value="&lt;span&gt;APIM applies throttling policy and forwards the request to the Function App.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-23" vertex="1">
                    <mxGeometry x="49.5" width="450" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-25" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-23" vertex="1">
                    <mxGeometry width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-24" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="164" y="896" width="498.5" height="42.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-15" value="&lt;span&gt;The Function App uses it's System Assigned Identity to access the Key Vault and retrieve the Connection String for the Cosmos Table.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-24" vertex="1">
                    <mxGeometry x="49.5" width="449" height="42.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-26" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-24" vertex="1">
                    <mxGeometry width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-25" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="164" y="948" width="499.5" height="79.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-16" value="&lt;span&gt;The Function App retrieves the &quot;Visitor Count&quot; from the Cosmos Table, if the entity exists. The Function App then increments the &quot;Visitor Count&quot; by 1 and stores the value in the Cosmos Table. If the entity doesn't exist, the Function App initialises it to 1.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-25" vertex="1">
                    <mxGeometry x="49.5" width="450" height="79.5" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-27" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-25" vertex="1">
                    <mxGeometry width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-26" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="164" y="1030" width="498.5" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-17" value="&lt;span&gt;The Function App returns the value to APIM.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-26" vertex="1">
                    <mxGeometry x="49.5" width="449" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="qhazRgXepDI2F2iA60wV-28" value="7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-26" vertex="1">
                    <mxGeometry width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-27" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="164" y="1071" width="498.5" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-18" value="&lt;span&gt;APIM returns the value to the client.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-27" vertex="1">
                    <mxGeometry x="49.5" width="449" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-19" value="8" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-27" vertex="1">
                    <mxGeometry width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="AcxdMaKK0mU5kZiv2lnr-41" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;exitX=-0.031;exitY=0.555;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="juHsk3jinzTreZJwjGsc-8" target="55kkj2fP2kc5KDoWpac7-1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="312.5" y="358" as="sourcePoint"/>
                        <mxPoint x="527.5" y="358" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="AcxdMaKK0mU5kZiv2lnr-48" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" parent="1" source="juHsk3jinzTreZJwjGsc-5" target="juHsk3jinzTreZJwjGsc-9" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="380.09846153846155" y="274" as="sourcePoint"/>
                        <mxPoint x="246.66000000000003" y="343.7600536193029" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="305" y="282"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="AcxdMaKK0mU5kZiv2lnr-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" parent="1" source="55kkj2fP2kc5KDoWpac7-1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="398" y="126" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="208" y="86"/>
                            <mxPoint x="398" y="86"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="AcxdMaKK0mU5kZiv2lnr-43" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;entryX=0.015;entryY=0.558;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" parent="1" source="55kkj2fP2kc5KDoWpac7-1" target="juHsk3jinzTreZJwjGsc-9" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="338" y="369.5" as="sourcePoint"/>
                        <mxPoint x="338" y="594.25" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="148" y="246"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="RLjyjs_sm2IHfBNOWAbh-1" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="138" y="251" width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="RLjyjs_sm2IHfBNOWAbh-3" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="294.5" y="75" width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="RLjyjs_sm2IHfBNOWAbh-4" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="294.5" y="155" width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="juHsk3jinzTreZJwjGsc-5" value="Function App" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/compute/Function_Apps.svg;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="370" y="321" width="68" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="juHsk3jinzTreZJwjGsc-6" value="Cosmos Table" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/databases/Azure_Cosmos_DB.svg;labelBackgroundColor=default;" parent="1" vertex="1">
                    <mxGeometry x="595" y="315.5" width="64" height="64" as="geometry"/>
                </mxCell>
                <mxCell id="juHsk3jinzTreZJwjGsc-7" value="Key Vault" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/security/Key_Vaults.svg;labelBackgroundColor=default;labelBorderColor=none;" parent="1" vertex="1">
                    <mxGeometry x="370" y="517" width="68" height="68" as="geometry"/>
                </mxCell>
                <mxCell id="juHsk3jinzTreZJwjGsc-8" value="DNS Zone" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/networking/DNS_Zones.svg;labelBackgroundColor=default;" parent="1" vertex="1">
                    <mxGeometry x="370" y="130.5" width="64" height="64" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;strokeColor=#808080;" parent="1" source="juHsk3jinzTreZJwjGsc-9" target="55kkj2fP2kc5KDoWpac7-1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="208" y="282"/>
                            <mxPoint x="268" y="282"/>
                            <mxPoint x="268" y="196"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="juHsk3jinzTreZJwjGsc-9" value="API Management&lt;div&gt;Service&lt;/div&gt;" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/app_services/API_Management_Services.svg;labelBackgroundColor=default;" parent="1" vertex="1">
                    <mxGeometry x="175.5" y="321" width="65" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-1" value="Client" style="sketch=0;outlineConnect=0;fillColor=#ACB7C7;strokeColor=#6c8ebf;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.client;labelBackgroundColor=default;" parent="1" vertex="1">
                    <mxGeometry x="169" y="130.5" width="78" height="76" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-8" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="240.5" y="363" as="sourcePoint"/>
                        <mxPoint x="369.5" y="362" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="300.5" y="419.5"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="RLjyjs_sm2IHfBNOWAbh-5" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="292.5" y="379.5" width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-10" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;entryX=1.062;entryY=0.929;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" parent="1" target="juHsk3jinzTreZJwjGsc-5" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="425" y="512" as="sourcePoint"/>
                        <mxPoint x="412" y="382" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="475" y="452"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="AcxdMaKK0mU5kZiv2lnr-47" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;exitX=-0.022;exitY=0.95;exitDx=0;exitDy=0;exitPerimeter=0;curved=1;" parent="1" source="juHsk3jinzTreZJwjGsc-5" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="485" y="412.5" as="sourcePoint"/>
                        <mxPoint x="385" y="512" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="325" y="452"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="RLjyjs_sm2IHfBNOWAbh-6" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="391" y="442.5" width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-12" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="574" y="328" as="sourcePoint"/>
                        <mxPoint x="445" y="329" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="509" y="283"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-13" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="445" y="363.25" as="sourcePoint"/>
                        <mxPoint x="574" y="362.25" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="505" y="419.75"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="RLjyjs_sm2IHfBNOWAbh-11" value="7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="294" y="291" width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="RLjyjs_sm2IHfBNOWAbh-10" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="499" y="339.5" width="23" height="23" as="geometry"/>
                </mxCell>
                <mxCell id="55kkj2fP2kc5KDoWpac7-14" value="8" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="255" y="251" width="23" height="23" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>