<mxfile host="app.diagrams.net" modified="2024-04-28T13:18:20.546Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36 Edg/124.0.0.0" version="24.3.1" etag="C6RPdGflv23Q9F9BOa5T" type="github">
  <diagram id="WI9T0HZ2pTsCkuznbFz-" name="Page-1">
    <mxGraphModel dx="1674" dy="939" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="55kkj2fP2kc5KDoWpac7-28" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="144" y="656" width="539" height="468" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-1" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=22;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-28" vertex="1">
          <mxGeometry width="539" height="468" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-20" value="" style="group" vertex="1" connectable="0" parent="55kkj2fP2kc5KDoWpac7-28">
          <mxGeometry x="20" y="11.5" width="498.5" height="36.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-11" value="&lt;span&gt;Client web browser queries DNS for the custom domain name of the API Management Service API.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-20" vertex="1">
          <mxGeometry x="49.5" width="449" height="36.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-22" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-20" vertex="1">
          <mxGeometry width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-21" value="" style="group" vertex="1" connectable="0" parent="55kkj2fP2kc5KDoWpac7-28">
          <mxGeometry x="20" y="66" width="499.5" height="43.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-12" value="&lt;span&gt;Azure Public DNS returns the value of the CNAME record which points the client to the hostname of the API Management Service API.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-21" vertex="1">
          <mxGeometry x="49.5" width="450" height="43.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-23" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-21" vertex="1">
          <mxGeometry width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-22" value="" style="group" vertex="1" connectable="0" parent="55kkj2fP2kc5KDoWpac7-28">
          <mxGeometry x="20" y="123" width="499.5" height="45.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-13" value="&lt;span&gt;Client makes a POST HTTP request to the API Management Service API.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-22" vertex="1">
          <mxGeometry x="49.5" width="450" height="45.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-24" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-22" vertex="1">
          <mxGeometry width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-23" value="" style="group" vertex="1" connectable="0" parent="55kkj2fP2kc5KDoWpac7-28">
          <mxGeometry x="20" y="183" width="499.5" height="41" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-14" value="&lt;span&gt;APIM applies throttling policy and forwards the request to the Function App.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-23" vertex="1">
          <mxGeometry x="49.5" width="450" height="41" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-25" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-23" vertex="1">
          <mxGeometry width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-24" value="" style="group" vertex="1" connectable="0" parent="55kkj2fP2kc5KDoWpac7-28">
          <mxGeometry x="20" y="240" width="498.5" height="42.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-15" value="&lt;span&gt;The Function App uses it&#39;s System Assigned Identity to access the Key Vault and retrieve the Connection String for the Cosmos Table.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-24" vertex="1">
          <mxGeometry x="49.5" width="449" height="42.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-26" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-24" vertex="1">
          <mxGeometry width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-25" value="" style="group" vertex="1" connectable="0" parent="55kkj2fP2kc5KDoWpac7-28">
          <mxGeometry x="20" y="292" width="499.5" height="79.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-16" value="&lt;span&gt;The Function App retrieves the &quot;Visitor Count&quot; from the Cosmos Table, if the entity exists. The Function App then increments the &quot;Visitor Count&quot; by 1 and stores the value in the Cosmos Table. If the entity doesn&#39;t exist, the Function App initialises it to 1.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-25" vertex="1">
          <mxGeometry x="49.5" width="450" height="79.5" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-27" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-25" vertex="1">
          <mxGeometry width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-26" value="" style="group" vertex="1" connectable="0" parent="55kkj2fP2kc5KDoWpac7-28">
          <mxGeometry x="20" y="374" width="498.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-17" value="&lt;span&gt;The Function App returns the value to APIM.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" parent="55kkj2fP2kc5KDoWpac7-26" vertex="1">
          <mxGeometry x="49.5" width="449" height="30" as="geometry" />
        </mxCell>
        <mxCell id="qhazRgXepDI2F2iA60wV-28" value="7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-26" vertex="1">
          <mxGeometry width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-27" value="" style="group" vertex="1" connectable="0" parent="55kkj2fP2kc5KDoWpac7-28">
          <mxGeometry x="20" y="415" width="498.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-18" value="&lt;span&gt;APIM returns the value to the client.&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=14;labelBackgroundColor=none;whiteSpace=wrap;" vertex="1" parent="55kkj2fP2kc5KDoWpac7-27">
          <mxGeometry x="49.5" width="449" height="30" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-19" value="8" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" vertex="1" parent="55kkj2fP2kc5KDoWpac7-27">
          <mxGeometry width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-29" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="138" y="75" width="521" height="510" as="geometry" />
        </mxCell>
        <mxCell id="AcxdMaKK0mU5kZiv2lnr-41" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;exitX=-0.031;exitY=0.555;exitDx=0;exitDy=0;exitPerimeter=0;" parent="55kkj2fP2kc5KDoWpac7-29" edge="1" target="55kkj2fP2kc5KDoWpac7-1" source="juHsk3jinzTreZJwjGsc-8">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="174.5" y="283" as="sourcePoint" />
            <mxPoint x="389.5" y="283" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="AcxdMaKK0mU5kZiv2lnr-48" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" parent="55kkj2fP2kc5KDoWpac7-29" edge="1" target="juHsk3jinzTreZJwjGsc-9" source="juHsk3jinzTreZJwjGsc-5">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="242.09846153846155" y="199" as="sourcePoint" />
            <mxPoint x="108.66000000000003" y="268.7600536193029" as="targetPoint" />
            <Array as="points">
              <mxPoint x="167" y="207" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AcxdMaKK0mU5kZiv2lnr-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" parent="55kkj2fP2kc5KDoWpac7-29" source="55kkj2fP2kc5KDoWpac7-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="260" y="51" as="targetPoint" />
            <Array as="points">
              <mxPoint x="70" y="11" />
              <mxPoint x="260" y="11" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AcxdMaKK0mU5kZiv2lnr-43" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;entryX=0.015;entryY=0.558;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" parent="55kkj2fP2kc5KDoWpac7-29" target="juHsk3jinzTreZJwjGsc-9" edge="1" source="55kkj2fP2kc5KDoWpac7-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="200" y="294.5" as="sourcePoint" />
            <mxPoint x="200" y="519.25" as="targetPoint" />
            <Array as="points">
              <mxPoint x="10" y="171" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="RLjyjs_sm2IHfBNOWAbh-1" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry y="176" width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="RLjyjs_sm2IHfBNOWAbh-3" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="156.5" width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="RLjyjs_sm2IHfBNOWAbh-4" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="156.5" y="80" width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="juHsk3jinzTreZJwjGsc-5" value="Function App" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/compute/Function_Apps.svg;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="232" y="246" width="68" height="60" as="geometry" />
        </mxCell>
        <mxCell id="juHsk3jinzTreZJwjGsc-6" value="Cosmos Table" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/databases/Azure_Cosmos_DB.svg;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="457" y="240.5" width="64" height="64" as="geometry" />
        </mxCell>
        <mxCell id="juHsk3jinzTreZJwjGsc-7" value="Key Vault" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/security/Key_Vaults.svg;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="232" y="442" width="68" height="68" as="geometry" />
        </mxCell>
        <mxCell id="juHsk3jinzTreZJwjGsc-8" value="DNS Zone" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/networking/DNS_Zones.svg;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="232" y="55.5" width="64" height="64" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;strokeColor=#808080;" edge="1" parent="55kkj2fP2kc5KDoWpac7-29" source="juHsk3jinzTreZJwjGsc-9" target="55kkj2fP2kc5KDoWpac7-1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="70" y="207" />
              <mxPoint x="130" y="207" />
              <mxPoint x="130" y="121" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="juHsk3jinzTreZJwjGsc-9" value="API Management&lt;div&gt;Service&lt;/div&gt;" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/app_services/API_Management_Services.svg;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="37.5" y="246" width="65" height="60" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-1" value="Client" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#232F3D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.client;" vertex="1" parent="55kkj2fP2kc5KDoWpac7-29">
          <mxGeometry x="31" y="55.5" width="78" height="76" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-8" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" edge="1" parent="55kkj2fP2kc5KDoWpac7-29">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="102.5" y="288" as="sourcePoint" />
            <mxPoint x="231.5" y="287" as="targetPoint" />
            <Array as="points">
              <mxPoint x="162.5" y="344.5" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="RLjyjs_sm2IHfBNOWAbh-5" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="154.5" y="304.5" width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-10" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;entryX=1.062;entryY=0.929;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" edge="1" parent="55kkj2fP2kc5KDoWpac7-29" target="juHsk3jinzTreZJwjGsc-5">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="287" y="437" as="sourcePoint" />
            <mxPoint x="274" y="307" as="targetPoint" />
            <Array as="points">
              <mxPoint x="337" y="377" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AcxdMaKK0mU5kZiv2lnr-47" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;exitX=-0.022;exitY=0.95;exitDx=0;exitDy=0;exitPerimeter=0;curved=1;" parent="55kkj2fP2kc5KDoWpac7-29" edge="1" source="juHsk3jinzTreZJwjGsc-5">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="347" y="337.5" as="sourcePoint" />
            <mxPoint x="247" y="437" as="targetPoint" />
            <Array as="points">
              <mxPoint x="187" y="377" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="RLjyjs_sm2IHfBNOWAbh-6" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="253" y="367.5" width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-12" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" edge="1" parent="55kkj2fP2kc5KDoWpac7-29">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="436" y="253" as="sourcePoint" />
            <mxPoint x="307" y="254" as="targetPoint" />
            <Array as="points">
              <mxPoint x="371" y="208" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-13" style="rounded=0;orthogonalLoop=1;jettySize=auto;elbow=vertical;html=1;strokeColor=#808080;curved=1;" edge="1" parent="55kkj2fP2kc5KDoWpac7-29">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="307" y="288.25" as="sourcePoint" />
            <mxPoint x="436" y="287.25" as="targetPoint" />
            <Array as="points">
              <mxPoint x="367" y="344.75" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="RLjyjs_sm2IHfBNOWAbh-11" value="7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="156" y="216" width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="RLjyjs_sm2IHfBNOWAbh-10" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" parent="55kkj2fP2kc5KDoWpac7-29" vertex="1">
          <mxGeometry x="361" y="264.5" width="23" height="23" as="geometry" />
        </mxCell>
        <mxCell id="55kkj2fP2kc5KDoWpac7-14" value="8" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4D9900;strokeColor=none;labelBackgroundColor=none;" vertex="1" parent="55kkj2fP2kc5KDoWpac7-29">
          <mxGeometry x="117" y="176" width="23" height="23" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
